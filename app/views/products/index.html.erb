<h2>Search Products</h2>
<%= form_tag(products_path, method: :get, class: "search-form") do %>
  <div class="form-group inline-group">
    <%= select_tag(:category_id, options_for_select(@categories.map { |c| [c.name, c.id] }), include_blank: 'Search by Category ', class: 'form-control') %>
  </div>
  <div class="form-group inline-group">
    <%= text_field_tag(:keyword, params[:keyword], placeholder: 'Enter keyword', class: 'form-control') %>
  </div>
  <%= submit_tag('Search', class: 'btn btn-primary') %>
<% end %>

<h1>All Products</h1>

<div class="products">
  <% @products.each_slice(3) do |products_row| %>
    <div class="row">
      <% products_row.each do |product| %>
        <div class="col-md-4">
          <div class="product-box">
            <%= link_to product do %>
              <%= image_tag(product.image.url, alt: product.name, class: "product-image") if product.image.present? %>
            <% end %>
            <h6><%= link_to product.name, product %></h6>
            <p>Price: <%= number_to_currency(product.price) %></p>
            <%= link_to add_item_cart_path(product_id: product.id), class: 'btn btn-primary', data: { "turbo-method": :put } do %>
              <span class="glyphicon glyphicon-shopping-cart shopping-carts"> Add to Cart </span>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
  <%= paginate @products %>
</div>

<h2>Products on Sale</h2>

<div class="products">
  <% @products_on_sale.each_slice(3) do |products_row| %>
    <div class="row">
      <% products_row.each do |product| %>
        <div class="col-md-4">
          <div class="product-box">
            <%= link_to product do %>
              <%= image_tag(product.image.url, alt: product.name, class: "product-image") if product.image.present? %>
            <% end %>
            <h6><%= link_to product.name, product %></h6>
            <p>Price: <%= number_to_currency(product.price) %></p>
            <%= link_to add_item_cart_path(product_id: product.id), class: 'btn btn-primary', data: { "turbo-method": :put } do %>
              <span class="glyphicon glyphicon-shopping-cart shopping-carts"> Add to Cart </span>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<hr>

<h2>Recently Updated Products</h2>

<div class="products">
  <% @recently_updated_products.each_slice(3) do |products_row| %>
    <div class="row">
      <% products_row.each do |product| %>
        <div class="col-md-4">
          <div class="product-box">
            <%= link_to product do %>
              <%= image_tag(product.image.url, alt: product.name, class: "product-image") if product.image.present? %>
            <% end %>
            <h6><%= link_to product.name, product %></h6>
            <p>Price: <%= number_to_currency(product.price) %></p>
            <%= link_to add_item_cart_path(product_id: product.id), class: 'btn btn-primary', data: { "turbo-method": :put } do %>
              <span class="glyphicon glyphicon-shopping-cart shopping-carts"> Add to Cart </span>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
